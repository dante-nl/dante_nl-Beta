<!DOCTYPE html>
<html lang="en">
<head>
	<title>Custime</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- General meta tags -->
	<meta property="og:type" content="website" />
	<meta name="description" content="Custime is a clock that allows for a ton of customisation, with different backgrounds and fonts to choose from.">
	<meta property="og:title" content="Custime - Customisable clocks">
	<meta property="og:description" content="Custime is a clock that is very customisable with different colors and various fonts to choose from. It also has an advanced editor, which expends on these features.">
	<meta property="og:image" content="https://cdn.dantenl.tk/Custime%20Logo.jpg">
	<meta property="theme-color" content="#A0C4FF" />
	
	<!-- Twitter meta tags -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Custime - Customisable clocks">
	<meta name="twitter:image" content="https://cdn.dantenl.tk/Custime%20Logo.jpg">
	<meta name="twitter:description" content="Custime is a clock that is very customisable with different colors and various fonts to choose from. It also has an advanced editor, which expends on these features.">

	<!-- Importing -->
	<link rel="stylesheet" href="style.css">
	<script src="https://kit.fontawesome.com/ee422b4c3c.js" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
	<script type='text/javascript' src='https://cdn.dantenl.tk/tinycolor.js'></script>
</head>
<body onload="load()">
	<div class="clock">
		<h1>
			<a href="javascript:changeFont()" id="time">
				<div class="spinner">
					<div class="rect1"></div>
					<div class="rect2"></div>
					<div class="rect3"></div>
					<div class="rect4"></div>
					<div class="rect5"></div>
				</div>
			</a>
			<p onclick="changeTimezoneDate()" class="icon tooltip" id="date">
				<span id="dateContent">DD/MM/YY</span> 
				<span class="tooltiptext">DD/MM/YY</span>
			</p>
		</h1>
		
	</div>
	<p id="copyConfirm" class="hideText pill">Copied URL! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span></p>
	<h1>
		<div style="display:flex;justify-content:center;align-items:center;">
			<a id="clock" href="javascript:changeTimeFormat()" class="far fa-clock fa-sm icon"></a>
			<!-- <a id="italic" href="javascript:changeTextFormatting('italic')" class=" far fa-solid fa-italic icon"></a> -->

			<a href="javascript:changeColor('red')" style="background-color: #FFADAD" class="circle"></a>
			<a href="javascript:changeColor('orange')" style="background-color: #ffd6a5" class="circle"></a>
			<a href="javascript:changeColor('yellow')" style="background-color: #FDFFB6" class="circle"></a>
			<a href="javascript:changeColor('green')" style="background-color: #CAFFBF" class="circle"></a>
			<a href="javascript:changeColor('lightblue')" style="background-color: #9bf6ff" class="circle"></a>
			<a href="javascript:changeColor('blue')" style="background-color: #A0C4FF" class="circle"></a>
			<a href="javascript:changeColor('purple')" style="background-color: #bdb2ff" class="circle"></a>
			<a href="javascript:changeColor('pink')" style="background-color: #ffc6ff" class="circle"></a>
			<a href="javascript:changeColor('white')" style="background-color: #fff" class="circle"></a>

			<a id="share" href="javascript:share()" class="fas fa-share-alt fa-sm icon"></a>
			<a id="settings" href="javascript:settings()" class="fa-solid fa-gear icon fa-sm"></a>

		</div>
	</h1>
	<!-- <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #7289da; color: #fff; border-radius: 8px">
		<strong>Hey!</strong> Currently you're visiting a page that is being worked on! So not everything might work
		properly! <i>This text is not part of the page, and is just directly pasted on top of it)</i> -->
	<script>
		function load() {
			if (/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
				// Mobile device
				console.log("Hey mobile user! You get the special VIP treatment with some cool new styles")
				document.body.classList.add("mobile")
			} else {
				// Not mobile
				console.log("Hey desktop/laptop user! You get the regular treatment with regular styles D: At least you get to see how this website is intended to be viewed")
				document.body.classList.remove("mobile")
			}
			AM_PM = false
			CustomElements = false
			TextColor = null
			now = new Date()
			CurrentHour = now.getHours()
			CurrentMinute = now.getMinutes()
			CurrentSecond = now.getSeconds()
			ShowDate = true
			SettingsOpen = false
			const TimeUpdate = setInterval(Time, 500);
			const DateUpdate = setInterval(UpdateDay, 1500);
			font = 0
			// BaseURL = "https://custime.dantenl.tk"
			// BaseURL = "http://127.0.0.1:5500/index.html"
			BaseURL = "http://beta.dantenl.tk"
			color = "white"
			LoadStyles()

			var HardResetCheck = localStorage.getItem("HardReset")
			console.log(`HardResetCheck: ${HardResetCheck}`)
			if (HardResetCheck != "true") {
				HardReset = false
				const queryString = new URLSearchParams(window.location.search)
				const testBG1 = queryString.get('bg')
				const testBG2 = queryString.get('textcolor')
				const testBG3 = queryString.get('bgcolor')
				if (testBG1 == null && testBG2 == null && testBG3 == null) {
					var Background = localStorage.getItem("bg");
					if (Background) {
						changeColor(Background)
						console.log(`Restored last color scheme from storage. (${Background})`)	
					}
				}
				const testFont1 = queryString.get('font')
				const testFont2 = queryString.get('customfont')
				if (testFont1 == null && testFont2 == null) {
					var Font = localStorage.getItem("font");
					if (Font) {
						if (Font == "SS") {
							document.getElementById("time").style.fontFamily = "Smooch Sans, sans-serif"
							document.getElementById("date").style.fontFamily = "Smooch Sans, sans-serif"
							console.log("Restored last font (Smooch Sans)")
							font = 1
						} else if (Font == "PD") {
							document.getElementById("time").style.fontFamily = "Playfair Display, sans-serif"
							document.getElementById("date").style.fontFamily = "Playfair Display, sans-serif"
							console.log("Restored last font (Playfair Display)")
							font = 2
						} else if (Font == "Av") {
							document.getElementById("time").style.fontFamily = "Arvo, serif"
							document.getElementById("date").style.fontFamily = "Arvo, serif"
							console.log("Restored last font (Arvo)")
							font = 3
						} else if (Font == "Sl") {
							document.getElementById("time").style.fontFamily = "Staatliches, cursive"
							document.getElementById("date").style.fontFamily = "Staatliches, cursive"
							console.log("Restored last font (Staatliches)")
							font = 4
						} else if (Font == "Mc") {
							document.getElementById("time").style.fontFamily = "MinecraftiaRegular, cursive"
							document.getElementById("date").style.fontFamily = "MinecraftiaRegular, cursive"
							console.log("Restored last font (Minecraftia)")
							font = 5
						} else if (Font == "Cv") {
							document.getElementById("time").style.fontFamily = "Caveat, cursive"
							document.getElementById("date").style.fontFamily = "Caveat, cursive"
							console.log("Restored last font (Caveat)")
							font = 6
						} else if (Font == "Sm") {
							document.getElementById("time").style.fontFamily = "Sacramento, cursive"
							document.getElementById("date").style.fontFamily = "Sacramento, cursive"
							console.log("Restored last font (Sacramento)")
							font = 7
						} else if (Font == "PM") {
							document.getElementById("time").style.fontFamily = "IBM Plex Mono, monospace"
							document.getElementById("date").style.fontFamily = "IBM Plex Mono, monospace"
							console.log("Restored last font (IBM Plex Mono)")
							font = 8
						} else if (Font == "FC") {
							document.getElementById("time").style.fontFamily = "Fira Code, monospace"
							document.getElementById("date").style.fontFamily = "Fira Code, monospace"
							console.log("Restored last font (Fira Code)")
							font = 9
						} else {
							document.getElementById("time").style.fontFamily = "Open Sans, sans-serif"
							document.getElementById("date").style.fontFamily = "Open Sans, sans-serif"
							console.log("Restored last font (Open Sans)")
							font = 0
						}
					}
					const testTime = queryString.get('time')
					if (testTime == null) {
						var TimeLocal = localStorage.getItem("time")
						if (TimeLocal) {
							if (TimeLocal == 12) {
								changeTimeFormat()
							} else {
								AM_PM = false
							}
						} else {
							localStorage.setItem("time", 24)
						}
					}
				}
			} else {
				HardReset = true
			}
		}

		function LoadStyles() {
			const queryString = new URLSearchParams(window.location.search)

			const checkRedirect = queryString.get('a')
			if (checkRedirect == "" || checkRedirect == "true" || checkRedirect == "t") {
				if (/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
					document.getElementById("copyConfirm").innerHTML = `Advanced editor not available on mobile devices! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
					document.getElementById("copyConfirm").classList.remove("hideText")
					document.getElementById("copyConfirm").classList.add("slide-in")
				} else {
					document.getElementById("copyConfirm").innerHTML = `Redirecting to advanced editor... <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
					document.getElementById("copyConfirm").classList.remove("hideText")
					document.getElementById("copyConfirm").classList.add("slide-in")
					window.location.replace(`${BaseURL}/advanced`)
				}
			}

			const loadTime = queryString.get('time')
			if (loadTime == "12") {
				AM_PM = true
				document.getElementById("clock").classList.remove('far')
				document.getElementById("clock").classList.add('fas')
				Time()
				console.log("Now showing 12 hour time format!")
			} else {
				AM_PM = false
				document.getElementById("clock").classList.add('far')
				document.getElementById("clock").classList.remove('fas')
				Time()
				console.log("Now showing 24 hour time format!")
			}

			const loadDate = queryString.get('date')
			if (loadDate == "f") {
				changeTimezoneDate()
			} else if (loadDate != "t") {
				if (localStorage.getItem("Timezone") == "true") {
					changeTimezoneDate()
				}
			}

			const loadBG = queryString.get('bg')
			if (loadBG == "r") {
				color = "red"
				document.body.classList.add("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to red!")
			} else if (loadBG == "o") {
				color = "orange"
				document.body.classList.remove("red")
				document.body.classList.add("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to orange!")
			} else if (loadBG == "y") {
				color = "yellow"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.add("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to x!")
			} else if (loadBG == "g") {
				color = "green"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.add("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to green!")
			} else if (loadBG == "lb") {
				color = "lightblue"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.add("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to light blue!")
			} else if (loadBG == "b") {
				color = "blue"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.add("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to blue!")
			} else if (loadBG == "pu") {
				color = "purple"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.add("purple")
				document.body.classList.remove("pink")
				console.log("Changed style to purple!")
			} else if (loadBG == "pi") {
				color = "pink"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.add("pink")
				console.log("Changed style to pink!")
			} else {
				color = "white"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				console.log("Default style!")
			}
			const loadFont = queryString.get('font') 
			if (loadFont == "SS") {
				document.getElementById("time").style.fontFamily = "Smooch Sans, sans-serif"
				document.getElementById("date").style.fontFamily = "Smooch Sans, sans-serif"
				console.log("Font is now Smooch Sans")
				font = 1
			} else if (loadFont == "PD") {
				document.getElementById("time").style.fontFamily = "Playfair Display, sans-serif"
				document.getElementById("date").style.fontFamily = "Playfair Display, sans-serif"
				console.log("Font is now Playfair Display")
				font = 2
			} else if (loadFont == "Av") {
				document.getElementById("time").style.fontFamily = "Arvo, serif"
				document.getElementById("date").style.fontFamily = "Arvo, serif"
				console.log("Font is now Arvo")
				font = 3
			} else if (loadFont == "Sl") {
				document.getElementById("time").style.fontFamily = "Staatliches, cursive"
				document.getElementById("date").style.fontFamily = "Staatliches, cursive"
				console.log("Font is now Staatliches")
				font = 4
			} else if (loadFont == "Mc") {
				document.getElementById("time").style.fontFamily = "MinecraftiaRegular, cursive"
				document.getElementById("date").style.fontFamily = "MinecraftiaRegular, cursive"
				console.log("Font is now Minecraftia")
				font = 5
			} else if (loadFont == "Cv") {
				document.getElementById("time").style.fontFamily = "Caveat, cursive"
				document.getElementById("date").style.fontFamily = "Caveat, cursive"
				console.log("Font is now Caveat")
				font = 6
			} else if (loadFont == "Sm") {
				document.getElementById("time").style.fontFamily = "Sacramento, cursive"
				document.getElementById("date").style.fontFamily = "Sacramento, cursive"
				console.log("Font is now Sacramento")
				font = 7
			} else if (loadFont == "PM") {
				document.getElementById("time").style.fontFamily = "IBM Plex Mono, monospace"
				document.getElementById("date").style.fontFamily = "IBM Plex Mono, monospace"
				console.log("Font is now IBM Plex Mono")
				font = 8
			} else if (loadFont == "FC") {
				document.getElementById("time").style.fontFamily = "Fira Code, monospace"
				document.getElementById("date").style.fontFamily = "Fira Code, monospace"
				console.log("Font is now Fira Code")
				font = 9
			} else {
				document.getElementById("time").style.fontFamily = "Open Sans, sans-serif"
				document.getElementById("date").style.fontFamily = "Open Sans, sans-serif"
				console.log("Font is now the default (Open Sans)")
				font = 0		
			}
			const loadCustomFont = queryString.get('customfont')
			if (loadCustomFont != null) {
				if (loadCustomFont == "Barlow Black") {
					CustomElements = true
					document.getElementById("time").style.fontFamily = `Barlow Black, sans-serif`
					document.getElementById("date").style.fontFamily = `Barlow Black, sans-serif`
					CustomFont = loadCustomFont
					font = "custom"
					console.log(`Font is now Barlow Black. Font loaded from LuckUnstoppable7's CDN`)
				} else {
					WebFont.load({
						google: {
							families: [`${loadCustomFont}:400`]
						},
						inactive: function () {
							WebFontError()
						},
					});
					CustomElements = true
					document.getElementById("time").style.fontFamily = `${loadCustomFont}, sans-serif`
					document.getElementById("date").style.fontFamily = `${loadCustomFont}, sans-serif`
					CustomFont = loadCustomFont
					font = "custom"
					console.log(`Font is now a custom font. (${loadCustomFont}) Fonts loaded with WebFontLoader`)
				}
			}

			const loadTextColor = queryString.get('textcolor')
			console.log(`loadTextColor: ${loadTextColor}`)
			if (loadTextColor == null || loadTextColor == "") {
				console.log("No text color imported!")
			} else {
				var reg = /^([0-9a-f]{3}){1,2}$/i
				if (reg.test(loadTextColor) == true) {
					CustomElements = true
					TextColor = `#${loadTextColor}`
					document.getElementById("time").style.color = TextColor
					document.getElementById("date").style.color = TextColor
					document.getElementsByClassName("icon")[0].style.color = TextColor
					document.getElementsByClassName("icon")[1].style.color = TextColor
					document.getElementsByClassName("icon")[2].style.color = TextColor
				} else {
					document.getElementById("copyConfirm").innerHTML = `That is not a valid hex color! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
					document.getElementById("copyConfirm").classList.remove("hideText")
					document.getElementById("copyConfirm").classList.add("slide-in")
					TextColor = "#000"
				}
			}

			const loadBGColor = queryString.get('bgcolor')
			if (loadBGColor == null || loadBGColor == "") {
				console.log("No background color imported!")
			} else {
				var reg = /^([0-9a-f]{3}){1,2}$/i
				if (reg.test(loadBGColor) == true) {
					CustomElements = true
					BackgroundColor = `#${loadBGColor}`
					document.body.style.backgroundColor = BackgroundColor
					document.getElementsByClassName('circle')[0].style.display = "none"
					document.getElementsByClassName('circle')[1].style.display = "none"
					document.getElementsByClassName('circle')[2].style.display = "none"
					document.getElementsByClassName('circle')[3].style.display = "none"
					document.getElementsByClassName('circle')[4].style.display = "none"
					document.getElementsByClassName('circle')[5].style.display = "none"
					document.getElementsByClassName('circle')[6].style.display = "none"
					document.getElementsByClassName('circle')[7].style.display = "none"
					document.getElementsByClassName('circle')[8].style.display = "none"
					
				} else {
					document.getElementById("copyConfirm").innerHTML = `That is not a valid hex color! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
					document.getElementById("copyConfirm").classList.remove("hideText")
					document.getElementById("copyConfirm").classList.add("slide-in")
					BackgroundColor = "#000"
				}
			}

			const loadAlert = queryString.get('alert')
			if (loadAlert == null || loadAlert == "") {
				console.log("No alerts to be loaded!")
			} else {
				console.log(`Showing the following alert: ${loadAlert}`)
				document.getElementById("copyConfirm").innerHTML = `${loadAlert} <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
				document.getElementById("copyConfirm").classList.remove("hideText")
				document.getElementById("copyConfirm").classList.add("slide-in")
			}
		}

		function Time() {

			if (SettingsOpen == true) {
				document.getElementById("settingsHardReset").oninput = function () { settings("HardReset") };
				if (HardReset == false) {
					document.getElementById("settingsHardReset").checked = false
				} else {
					document.getElementById("settingsHardReset").checked = true
				}
			}

			if (ShowDate == false) {
				Timezone()
			}

			now = new Date()
			if (AM_PM==false) {
				CurrentHour = now.getHours()
				CurrentMinute = now.getMinutes()
				CurrentSecond = now.getSeconds()
				if (CurrentHour <= 9) {
					CurrentHour = `0${CurrentHour}`
				} if (CurrentMinute <= 9) {
					CurrentMinute = `0${CurrentMinute}`
				} if (CurrentSecond <= 9) {
					CurrentSecond = `0${CurrentSecond}`
				}
				document.getElementById("time").innerText = `${CurrentHour}:${CurrentMinute}:${CurrentSecond}`
			} else {
				document.getElementById("time").innerText = formatAMPM(new Date)
			}
		}

		function UpdateDay() {
			if (SettingsOpen == false) {
				if (ShowDate == true) {
					now = new Date()
					thisDay = now.getDate()
					thisMonth = now.getMonth() + 1
					thisYear = now.getFullYear()
					document.getElementById("dateContent").innerText = `${thisDay}-${thisMonth}-${thisYear}`
				}
			}
		}

		function formatAMPM(date) {
			var hours = date.getHours();
			var minutes = date.getMinutes();
			var ampm = hours >= 12 ? 'pm' : 'am';
			hours = hours % 12;
			hours = hours ? hours : 12;
			minutes = minutes < 10 ? '0' + minutes : minutes;
			seconds = date.getSeconds()
			if (seconds <= 9) {
				seconds = `0${seconds}`
			}
			var strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;
			return strTime;
		}

		function changeTimeFormat() {
			localStorage.removeItem("time");
			if (AM_PM==false) {
				AM_PM = true
				document.getElementById("clock").classList.remove('far')
				document.getElementById("clock").classList.add('fas')
				localStorage.setItem("time", 12)
				Time()
				console.log("Now showing 12 hour time format!")
			} else {
				AM_PM = false
				document.getElementById("clock").classList.add('far')
				document.getElementById("clock").classList.remove('fas')
				localStorage.setItem("time", 24)
				Time()
				console.log("Now showing 24 hour time format!")
			}
		}

		function changeTextFormatting(format_type) {
			if (format_type == "italic") {
				document.getElementById("time").style.fontStyle = "italic"
				document.getElementById("date").style.fontStyle = "italic"
			}
			// TODO: Add an option to remove, maybe underline too?
		}

		function changeColor(LocalColor) {
			localStorage.removeItem("bg");
			if (LocalColor == "red") {
				color = "red"
				document.body.classList.add("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "red")
				console.log("Changed style to red!")
			} else if (LocalColor == "orange") {
				color = "orange"
				document.body.classList.remove("red")
				document.body.classList.add("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "orange")
				console.log("Changed style to orange!")
			} else if (LocalColor == "yellow") {
				color = "yellow"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.add("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "yellow")
				console.log("Changed style to yellow!")
			} else if (LocalColor == "green") {
				color = "green"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.add("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "green")
				console.log("Changed style to green!")
			} else if (LocalColor == "lightblue") {
				color = "lightblue"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.add("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "lightblue")
				console.log("Changed style to light blue!")
			} else if (LocalColor == "blue") {
				color = "blue"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.add("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "blue")
				console.log("Changed style to blue!")
			} else if (LocalColor == "purple") {
				color = "purple"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.add("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "purple")
				console.log("Changed style to purple!")
			} else if (LocalColor == "pink") {
				color = "pink"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.add("pink")
				localStorage.setItem("bg", "pink")
				console.log("Changed style to pink!")
			} else if (LocalColor == "white") {
				color = "white"
				document.body.classList.remove("red")
				document.body.classList.remove("orange")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("lightblue")
				document.body.classList.remove("blue")
				document.body.classList.remove("purple")
				document.body.classList.remove("pink")
				localStorage.setItem("bg", "white")
				console.log("Reset style!")
			}
		}

		function changeFont() {
			if (font != "custom") {
				localStorage.removeItem("font")
				if (font==0) {
					document.getElementById("time").style.fontFamily = "Smooch Sans, sans-serif"
					document.getElementById("date").style.fontFamily = "Smooch Sans, sans-serif"
					console.log("Font is now Smooch Sans")
					localStorage.setItem("font", "SS")
					font++
				} else if (font == 1) {
					document.getElementById("time").style.fontFamily = "Playfair Display, sans-serif"
					document.getElementById("date").style.fontFamily = "Playfair Display, sans-serif"
					console.log("Font is now Playfair Display")
					localStorage.setItem("font", "PD")
					font++
				} else if (font == 2) {
					document.getElementById("time").style.fontFamily = "Arvo, serif"
					document.getElementById("date").style.fontFamily = "Arvo, serif"
					console.log("Font is now Arvo")
					localStorage.setItem("font", "Av")
					font++
				} else if (font == 3) {
					document.getElementById("time").style.fontFamily = "Staatliches, cursive"
					document.getElementById("date").style.fontFamily = "Staatliches, cursive"
					console.log("Font is now Staatliches")
					localStorage.setItem("font", "Sl")
					font++
				} else if (font == 4) {
					document.getElementById("time").style.fontFamily = "MinecraftiaRegular, cursive"
					document.getElementById("date").style.fontFamily = "MinecraftiaRegular, cursive"
					console.log("Font is now Minecraftia")
					localStorage.setItem("font", "Mc")
					font++
				} else if (font == 5) {
					document.getElementById("time").style.fontFamily = "Caveat, cursive"
					document.getElementById("date").style.fontFamily = "Caveat, cursive"
					console.log("Font is now Caveat")
					localStorage.setItem("font", "Cv")
					font++
				} else if (font == 6) {
					document.getElementById("time").style.fontFamily = "Sacramento, cursive"
					document.getElementById("date").style.fontFamily = "Sacramento, cursive"
					console.log("Font is now Sacramento")
					localStorage.setItem("font", "Sm")
					font++
				} else if (font == 7) {
					document.getElementById("time").style.fontFamily = "IBM Plex Mono, monospace"
					document.getElementById("date").style.fontFamily = "IBM Plex Mono, monospace"
					console.log("Font is now IBM Plex Mono")
					localStorage.setItem("font", "PM")
					font++
				} else if (font == 8) {
					document.getElementById("time").style.fontFamily = "Fira Code, monospace"
					document.getElementById("date").style.fontFamily = "Fira Code, monospace"
					console.log("Font is now Fira Code")
					localStorage.setItem("font", "FC")
					font++
				} else if (font == 9) {
					document.getElementById("time").style.fontFamily = "Open Sans, sans-serif"
					document.getElementById("date").style.fontFamily = "Open Sans, sans-serif"
					console.log("Font is now reset (Open Sans)")
					localStorage.setItem("font", "OS")
					font = 0
				}
			}
		}

		function share() {
			if (AM_PM==true) {
				ShareURL_1 = "?time=12"
			} else {
				ShareURL_1 = "?time=24"
			}

			if (ShowDate == false) {
				ShareURL_1plus = "&date=f"
			} else {
				ShareURL_1plus = "&date=t"
			}

			if (color=="red") {
				ShareURL_2 = "&bg=r"
			} else if (color == "orange") {
				ShareURL_2 = "&bg=o"
			} else if (color == "yellow") {
				ShareURL_2 = "&bg=y"
			} else if (color == "green") {
				ShareURL_2 = "&bg=g"
			} else if (color == "lightblue") {
				ShareURL_2 = "&bg=lb"
			} else if (color == "blue") {
				ShareURL_2 = "&bg=b"
			} else if (color == "purple") {
				ShareURL_2 = "&bg=pu"
			} else if (color == "pink") {
				ShareURL_2 = "&bg=pi"
			} else {
				const queryString = new URLSearchParams(window.location.search)
				const loadBGColor = queryString.get('bgcolor')
				var reg = /^([0-9a-f]{3}){1,2}$/i
				if (reg.test(loadBGColor) == true) {
					ShareURL_2 = `&bgcolor=${loadBGColor}`

					const loadTextColor = queryString.get('textcolor')
					var reg = /^([0-9a-f]{3}){1,2}$/i
					if (reg.test(loadTextColor) == true) {
						ShareURL_2 = `&bgcolor=${loadBGColor}&textcolor=${loadTextColor}`
					}
				} else {
					ShareURL_2 = "&bg=w"
				}
			}

			if (font==0) {
				ShareURL_3 = "&font=OS"
			} else if (font==1) {
				ShareURL_3 = "&font=SS"
			} else if (font == 2) {
				ShareURL_3 = "&font=PD"
			} else if (font == 3) {
				ShareURL_3 = "&font=Av"
			} else if (font == 4) {
				ShareURL_3 = "&font=Sl"
			} else if (font == 5) {
				ShareURL_3 = "&font=Mc"
			} else if (font == 6) {
				ShareURL_3 = "&font=Cv"
			} else if (font == 7) {
				ShareURL_3 = "&font=Sm"
			} else if (font == 8) {
				ShareURL_3 = "&font=PM"
			} else if (font == 9) {
				ShareURL_3 = "&font=FC"
			} else if (font == "custom") {
				CustomFontShare = CustomFont.replace(/ +/g, "%20")
				ShareURL_3 = `&customfont=${CustomFontShare}`
			}
			// alert(`${BaseURL}${ShareURL_1}${ShareURL_2}${ShareURL_3}`)
			copy(`${BaseURL}${ShareURL_1}${ShareURL_1plus}${ShareURL_2}${ShareURL_3}`)
		}

		function settings(command) {
			if (command == null) {
				if (SettingsOpen == false) {
					SettingsOpen = true
					UpdateDay()
					document.getElementById("date").innerHTML = `
					<div class='AlignItems'>
						<a style="text-decoration: none;" href="${BaseURL}/advanced" target="_blank">
							<i class="fas fa-external-link-alt icon"></i>
							<p class="regular-url">Open advanced editor</a>
						</a>
					</div>
					<div class='AlignItems'>
						<p class='regular'>Do not apply local settings
							<form action='settings("HardReset")'>
								<label class='switch'><input id='settingsHardReset' type='checkbox'>
									<span class='slider round'></span>
								</label>
							</form>
						</p>
					</div>
					<div class='AlignItems'>
						<a style="text-decoration: none" href="javascript:settings('DeleteAll')">
							<p class='regular danger'>Delete stored data</p>
						</a>
					</div>`
				} else {
					SettingsOpen = false
					document.getElementById("date").innerHTML = '<span id="dateContent">DD/MM/YY</span> <span class="tooltiptext">DD/MM/YY</span>'
					UpdateDay()
				}
			} else if (command == "HardReset") {
				var HardResetFile = localStorage.getItem("HardReset")
				console.log(`HardReset status: ${HardResetFile}`)
				if (HardResetFile == "true") {
					HardReset = false
					localStorage.removeItem("HardReset");
					localStorage.setItem("HardReset", "false")
				} else {
					HardReset = true
					localStorage.removeItem("HardReset");
					localStorage.setItem("HardReset", "true")
				}
			} else if (command == "DeleteAll") {
				localStorage.clear()
				window.location.replace(`${BaseURL}?alert=Cleared stored data!`)
			}
		}

		function changeTimezoneDate() {
			if (ShowDate == true) {
				ShowDate = false
				localStorage.setItem("Timezone", "true")
				Timezone()
			} else {
				ShowDate = true
				document.getElementsByClassName("tooltiptext")[0].innerText = "DD/MM/YY"
				localStorage.setItem("Timezone", "false")
				UpdateDay()
			}
		}

		function Timezone() {
			// TimeNYC = new Date().toLocaleString('en-GB', { timeZone: "America/New_York" });
			now = new Date()
			TimeNYCHours = now.toLocaleString('en-GB', { timeZone: "America/New_York", hour: "2-digit" });
			TimeNYCMinutes = now.toLocaleString('en-GB', { timeZone: "America/New_York", minute: "2-digit" });
			if (TimeNYCMinutes <= 9) {
				TimeNYCMinutes = `0${TimeNYCMinutes}`
			}
			TimeNYC = `${TimeNYCHours}:${TimeNYCMinutes}`

			TimeUTCHours = now.toLocaleString('en-GB', { timeZone: "Europe/London", hour: "2-digit" });
			TimeUTCMinutes = now.toLocaleString('en-GB', { timeZone: "Europe/London", minute: "2-digit" });
			if (TimeUTCMinutes <= 9) {
				TimeUTCMinutes = `0${TimeUTCMinutes}`
			}
			TimeUTC = `${TimeUTCHours}:${TimeUTCMinutes}`

			TimeCSTHours = now.toLocaleString('en-GB', { timeZone: "Asia/Shanghai", hour: "2-digit" });
			TimeCSTMinutes = now.toLocaleString('en-GB', { timeZone: "Asia/Shanghai", minute: "2-digit" });
			if (TimeCSTMinutes <= 9) {
				TimeCSTMinutes = `0${TimeCSTMinutes}`
			}
			TimeCST = `${TimeCSTHours}:${TimeCSTMinutes}`

			document.getElementsByClassName("tooltiptext")[0].innerText = "NYC-London-Beijing"
			
			document.getElementById("dateContent").innerHTML = `
			<i class="fa-solid fa-earth-americas icon" id="globe-am"></i>${TimeNYC}
			<i class="fa-solid fa-earth-europe icon" id="globe-eu"></i>${TimeUTC}
			<i class="fa-solid fa-earth-asia icon" id="globe-as"></i>${TimeCST}`
			if (TextColor) {
				document.getElementById("globe-am").style.color = TextColor
				document.getElementById("globe-eu").style.color = TextColor
				document.getElementById("globe-as").style.color = TextColor
			}
		}

		function WebFontError() {
			document.getElementById("copyConfirm").innerHTML = `Could not load custom font! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
			document.getElementById("copyConfirm").classList.remove("hideText")
			document.getElementById("copyConfirm").classList.add("slide-in")
		}

		function copy(text) {
			var textField = document.createElement('textarea');
			textField.innerText = text;
			document.body.appendChild(textField);
			textField.select();
			document.execCommand('copy');
			textField.remove();
			document.getElementById("copyConfirm").innerHTML = `Copied URL! <span class="close" onclick="this.parentElement.classList.add('hideText'); this.parentElement.classList.remove('slide-in');">&times;</span>`
			document.getElementById("copyConfirm").classList.add("slide-in")
			document.getElementById("copyConfirm").classList.remove("hideText")
		}

		function wait(ms) {
			var start = new Date().getTime();
			var end = start;
			while (end < start + ms) {
				end = new Date().getTime();
			}
		}

		// Amazing code from Pimp Trizkit at https://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors
		// To make something 40% darker: pSBC(-0.40, Variable)
		// And to make it 40% lighter: pSBC(0.40, Variable)
		const pSBC = (p, c0, c1, l) => {
			let r, g, b, P, f, t, h, i = parseInt, m = Math.round, a = typeof (c1) == "string";
			if (typeof (p) != "number" || p < -1 || p > 1 || typeof (c0) != "string" || (c0[0] != 'r' && c0[0] != '#') || (c1 && !a)) return null;
			if (!this.pSBCr) this.pSBCr = (d) => {
				let n = d.length, x = {};
				if (n > 9) {
					[r, g, b, a] = d = d.split(","), n = d.length;
					if (n < 3 || n > 4) return null;
					x.r = i(r[3] == "a" ? r.slice(5) : r.slice(4)), x.g = i(g), x.b = i(b), x.a = a ? parseFloat(a) : -1
				} else {
					if (n == 8 || n == 6 || n < 4) return null;
					if (n < 6) d = "#" + d[1] + d[1] + d[2] + d[2] + d[3] + d[3] + (n > 4 ? d[4] + d[4] : "");
					d = i(d.slice(1), 16);
					if (n == 9 || n == 5) x.r = d >> 24 & 255, x.g = d >> 16 & 255, x.b = d >> 8 & 255, x.a = m((d & 255) / 0.255) / 1000;
					else x.r = d >> 16, x.g = d >> 8 & 255, x.b = d & 255, x.a = -1					} return x
			};
			h = c0.length > 9, h = a ? c1.length > 9 ? true : c1 == "c" ? !h : false : h, f = this.pSBCr(c0), P = p < 0, t = c1 && c1 != "c" ? this.pSBCr(c1) : P ? { r: 0, g: 0, b: 0, a: -1 } : { r: 255, g: 255, b: 255, a: -1 }, p = P ? p * -1 : p, P = 1 - p;
			if (!f || !t) return null;
			if (l) r = m(P * f.r + p * t.r), g = m(P * f.g + p * t.g), b = m(P * f.b + p * t.b);
			else r = m((P * f.r ** 2 + p * t.r ** 2) ** 0.5), g = m((P * f.g ** 2 + p * t.g ** 2) ** 0.5), b = m((P * f.b ** 2 + p * t.b ** 2) ** 0.5);
			a = f.a, t = t.a, f = a >= 0 || t >= 0, a = f ? a < 0 ? t : t < 0 ? a : a * P + t * p : 0;
			if (h) return "rgb" + (f ? "a(" : "(") + r + "," + g + "," + b + (f ? "," + m(a * 1000) / 1000 : "") + ")";
			else return "#" + (4294967296 + r * 16777216 + g * 65536 + b * 256 + (f ? m(a * 255) : 0)).toString(16).slice(1, f ? undefined : -2)
		}
	</script>
</body>
</html>
