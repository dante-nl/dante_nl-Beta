<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta property="og:description" content="Custime is a customisable time viewer, with different backgrounds, fonts and the ability to switch from 24 hour time to 12 hour time!">
	<link rel="stylesheet" href="style.css">
	<script src="https://kit.fontawesome.com/ee422b4c3c.js" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
	<script>
		// document.querySelector('meta[name="og:description"]').setAttribute(`content! Current Hour: ${CurrentHour}`, _desc);
		// ^ Make it work! Has to say things such as time, background color and font if they're set, otherwise a default description
	</script>
	<title>Custime</title>
</head>
<body onload="load()">
	<div class="clock">
		<h1><a href="javascript:changeFont()" id="time"><div class="spinner">
			<div class="rect1"></div>
			<div class="rect2"></div>
			<div class="rect3"></div>
			<div class="rect4"></div>
			<div class="rect5"></div>
			<!-- Add date and a switch for other timezones -->
		</div></a></h1>
	</div>
	<p id="copyConfirm" class="hideText pill">Copied URL! <span class="close" onclick="this.parentElement.classList.add('hideText');">&times;</span></p>
	<h1>
		<div style="display:flex;justify-content:center;align-items:center;">
			<a id="clock" href="javascript:changeTimeFormat()" class="far fa-clock fa-sm icon"></a>

			<a href="javascript:changeColor('red')" style="background-color: #FFADAD" class="circle"></a>
			<a href="javascript:changeColor('yellow')" style="background-color: #FDFFB6" class="circle"></a>
			<a href="javascript:changeColor('green')" style="background-color: #CAFFBF" class="circle"></a>
			<a href="javascript:changeColor('blue')" style="background-color: #A0C4FF" class="circle"></a>
			<a href="javascript:changeColor('white')" style="background-color: #fff" class="circle"></a>

			<a id="share" href="javascript:share()" class="fas fa-share-alt fa-sm icon"></a>
		</div>
	</h1>
	<div style="font-family: Arial, sans-serif; padding: 20px; background-color: #7289da; color: #fff; border-radius: 8px">
		<strong>Hey!</strong> Currently you're visiting a page that is being worked on! So not everything might work
		properly! <i>This text is not part of the page, and is just directly pasted on top of it)</i>

	<script>
		function load() {
			if (/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
				// Mobile device
				console.log("Hey mobile user! You get the special VIP treatment with some cool new styles")
				document.body.classList.add("mobile")
			} else {
				// Not mobile
				console.log("Hey desktop/laptop user! You get the regular treatment with regular styles D: At least you get to see how this website is intended to be viewed")
				document.body.classList.remove("mobile")
			}
			// document.getElementById("copyConfirm").style.display = "none"
			AM_PM = false
			now = new Date()
			CurrentHour = now.getHours()
			CurrentMinute = now.getMinutes()
			CurrentSecond = now.getSeconds()
			const TimeUpdate = setInterval(Time, 1000);
			font = 0
			// BaseURL = "https://custime.dantenl.tk"
			// BaseURL = "http://127.0.0.1:5500/index.html"
			BaseURL = "http://beta.dantenl.tk"
			color = "white"
			LoadStyles()
		}

		function LoadStyles() {
			const queryString = new URLSearchParams(window.location.search)
			const loadTime = queryString.get('time')
			if (loadTime == "12") {
				AM_PM = true
				document.getElementById("clock").classList.remove('far')
				document.getElementById("clock").classList.add('fas')
				Time()
				console.log("Now showing 12 hour time format!")
			} else {
				AM_PM = false
				document.getElementById("clock").classList.add('far')
				document.getElementById("clock").classList.remove('fas')
				Time()
				console.log("Now showing 24 hour time format!")
			}
			const loadBG = queryString.get('bg')
			if (loadBG == "r") {
				color = "red"
				document.body.classList.add("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Changed style to red!")
			} else if (loadBG == "y") {
				color = "yellow"
				document.body.classList.remove("red")
				document.body.classList.add("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Changed style to yellow!")
			} else if (loadBG == "g") {
				color = "green"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.add("green")
				document.body.classList.remove("blue")
				console.log("Changed style to green!")
			} else if (loadBG == "b") {
				color = "blue"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.add("blue")
				console.log("Changed style to blue!")
			} else {
				color = "white"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Default style!")
			}
			const loadFont = queryString.get('font') 
			if (loadFont == "SS") {
				document.getElementById("time").style.fontFamily = "Smooch Sans, sans-serif"
				console.log("Font is now Smooch Sans")
				font = 1
			} else if (loadFont == "PD") {
				document.getElementById("time").style.fontFamily = "Playfair Display, sans-serif"
				console.log("Font is now Playfair Display")
				font = 2
			} else if (loadFont == "Av") {
				document.getElementById("time").style.fontFamily = "Arvo, serif"
				console.log("Font is now Arvo")
				font = 3
			} else if (loadFont == "Sl") {
				document.getElementById("time").style.fontFamily = "Staatliches, cursive"
				console.log("Font is now Staatliches")
				font = 4
			} else if (loadFont == "Mc") {
				document.getElementById("time").style.fontFamily = "MinecraftiaRegular, cursive"
				console.log("Font is now Minecraftia")
				font = 5
			} else if (loadFont == "Cv") {
				document.getElementById("time").style.fontFamily = "Caveat, cursive"
				console.log("Font is now Caveat")
				font = 6
			} else if (loadFont == "Sm") {
				document.getElementById("time").style.fontFamily = "Sacramento, cursive"
				console.log("Font is now Sacramento")
				font = 7
			} else if (loadFont == "PM") {
				document.getElementById("time").style.fontFamily = "IBM Plex Mono, monospace"
				console.log("Font is now IBM Plex Mono")
				font = 8
			} else if (loadFont == "FC") {
				document.getElementById("time").style.fontFamily = "Fira Code, monospace"
				console.log("Font is now Fira Code")
				font = 9
			} else {
				document.getElementById("time").style.fontFamily = "Open Sans, sans-serif"
				console.log("Font is now the default (Open Sans)")
				font = 0		
			}
			const loadCustomFont = queryString.get('customfont')
			if (loadCustomFont != null) {
				WebFont.load({
					google: {
						families: [`${loadCustomFont}:400`]
					}
				});
				document.getElementById("time").style.fontFamily = `${loadCustomFont}, sans-serif`
				CustomFont = loadCustomFont
				font = "custom"
				console.log(`Font is now a custom font. (${loadCustomFont}) Fonts loaded with WebFontLoader`)
			}
		}

		function Time() {
			now = new Date()
			if (AM_PM==false) {
				CurrentHour = now.getHours()
				CurrentMinute = now.getMinutes()
				CurrentSecond = now.getSeconds()
				if (CurrentHour <= 9) {
					CurrentHour = `0${CurrentHour}`
				} if (CurrentMinute <= 9) {
					CurrentMinute = `0${CurrentMinute}`
				} if (CurrentSecond <= 9) {
					CurrentSecond = `0${CurrentSecond}`
				}
				document.getElementById("time").innerText = `${CurrentHour}:${CurrentMinute}:${CurrentSecond}`
			} else {
				document.getElementById("time").innerText = formatAMPM(new Date)
			}
		}

		function formatAMPM(date) {
			var hours = date.getHours();
			var minutes = date.getMinutes();
			var ampm = hours >= 12 ? 'pm' : 'am';
			hours = hours % 12;
			hours = hours ? hours : 12;
			minutes = minutes < 10 ? '0' + minutes : minutes;
			seconds = date.getSeconds()
			if (seconds <= 9) {
				seconds = `0${seconds}`
			}
			var strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;
			return strTime;
		}

		function changeTimeFormat() {
			if (AM_PM==false) {
				AM_PM = true
				document.getElementById("clock").classList.remove('far')
				document.getElementById("clock").classList.add('fas')
				Time()
				console.log("Now showing 12 hour time format!")
			} else {
				AM_PM = false
				document.getElementById("clock").classList.add('far')
				document.getElementById("clock").classList.remove('fas')
				Time()
				console.log("Now showing 24 hour time format!")
			}
		}

		function changeColor(LocalColor) {
			if (LocalColor == "red") {
				color = "red"
				document.body.classList.add("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Changed style to red!")
			} else if (LocalColor == "yellow") {
				color = "yellow"
				document.body.classList.remove("red")
				document.body.classList.add("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Changed style to yellow!")
			} else if (LocalColor == "green") {
				color = "green"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.add("green")
				document.body.classList.remove("blue")
				console.log("Changed style to green!")
			} else if (LocalColor == "blue") {
				color = "blue"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.add("blue")
				console.log("Changed style to blue!")
			} else if (LocalColor == "white") {
				color = "white"
				document.body.classList.remove("red")
				document.body.classList.remove("yellow")
				document.body.classList.remove("green")
				document.body.classList.remove("blue")
				console.log("Reset style!")
			}
		}

		function changeFont() {
			if (font==0) {
				document.getElementById("time").style.fontFamily = "Smooch Sans, sans-serif"
				console.log("Font is now Smooch Sans")
				font++
			} else if (font == 1) {
				document.getElementById("time").style.fontFamily = "Playfair Display, sans-serif"
				console.log("Font is now Playfair Display")
				font++
			} else if (font == 2) {
				document.getElementById("time").style.fontFamily = "Arvo, serif"
				console.log("Font is now Arvo")
				font++
			} else if (font == 3) {
				document.getElementById("time").style.fontFamily = "Staatliches, cursive"
				console.log("Font is now Staatliches")
				font++
			} else if (font == 4) {
				document.getElementById("time").style.fontFamily = "MinecraftiaRegular, cursive"
				console.log("Font is now Minecraftia")
				font++
			} else if (font == 5) {
				document.getElementById("time").style.fontFamily = "Caveat, cursive"
				console.log("Font is now Caveat")
				font++
			} else if (font == 6) {
				document.getElementById("time").style.fontFamily = "Sacramento, cursive"
				console.log("Font is now Sacramento")
				font++
			} else if (font == 7) {
				document.getElementById("time").style.fontFamily = "IBM Plex Mono, monospace"
				console.log("Font is now IBM Plex Mono")
				font++
			} else if (font == 8) {
				document.getElementById("time").style.fontFamily = "Fira Code, monospace"
				console.log("Font is now Fira Code")
				font++
			} else if (font == 9) {
				document.getElementById("time").style.fontFamily = "Open Sans, sans-serif"
				console.log("Font is now reset (Open Sans)")
				font = 0
			}
		}

		function share() {
			if (AM_PM==true) {
				ShareURL_1 = "?time=12"
			} else {
				ShareURL_1 = "?time=24"
			}

			if (color=="red") {
				ShareURL_2 = "&bg=r"
			} else if (color == "yellow") {
				ShareURL_2 = "&bg=y"
			} else if (color == "green") {
				ShareURL_2 = "&bg=g"
			} else if (color == "blue") {
				ShareURL_2 = "&bg=b"
			} else {
				ShareURL_2 = "&bg=w"
			}

			if (font==0) {
				ShareURL_3 = "&font=OS"
			} else if (font==1) {
				ShareURL_3 = "&font=SS"
			} else if (font == 2) {
				ShareURL_3 = "&font=PD"
			} else if (font == 3) {
				ShareURL_3 = "&font=Av"
			} else if (font == 4) {
				ShareURL_3 = "&font=Sl"
			} else if (font == 5) {
				ShareURL_3 = "&font=Mc"
			} else if (font == 6) {
				ShareURL_3 = "&font=Cv"
			} else if (font == 7) {
				ShareURL_3 = "&font=Sm"
			} else if (font == 8) {
				ShareURL_3 = "&font=PM"
			} else if (font == 9) {
				ShareURL_3 = "&font=FC"
			} else if (font == "custom") {
				ShareURL_3 = `&customfont=${CustomFont}`
			}
			// alert(`${BaseURL}${ShareURL_1}${ShareURL_2}${ShareURL_3}`)
			copy(`${BaseURL}${ShareURL_1}${ShareURL_2}${ShareURL_3}`)
		}

		function copy(text) {
			var textField = document.createElement('textarea');
			textField.innerText = text;
			document.body.appendChild(textField);
			textField.select();
			document.execCommand('copy');
			textField.remove();
			document.getElementById("copyConfirm").classList.remove("hideText")
		}

		function wait(ms) {
			var start = new Date().getTime();
			var end = start;
			while (end < start + ms) {
				end = new Date().getTime();
			}
		}
	</script>
</body>
</html>
